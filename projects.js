// Projects Page Gallery Data
const projectsGalleryData = {
    'wellness-club': {
        title: 'Luxury Gym',
        description: 'A serene luxury wellness retreat featuring minimalist design, natural materials, and tranquil spa facilities. This project combines modern architecture with holistic wellness concepts to create an immersive healing environment.',
        images: [
            'images/projects/600 Main Hume Lux Gym/07292024_Hume_0082_V1.jpg',
            'images/projects/600 Main Hume Lux Gym/07292024_Hume_0172_V1.jpg',
            'images/projects/600 Main Hume Lux Gym/07292024_Hume_0235_V1.jpg',
            'images/projects/600 Main Hume Lux Gym/07292024_Hume_0292_V2.jpg',
            'images/projects/600 Main Hume Lux Gym/07292024_Hume_0405_V3.jpg',
            'images/projects/600 Main Hume Lux Gym/Women+Sauna.jpg'
        ]
    },
    'joshua-tree': {
        title: 'Joshua Tree Airbnb',
        description: 'Luxury Airbnb vacation home, integrating high-end indoor comforts with exceptional outdoor features, creating an immersive desert retreat.',
        images: [
            'images/projects/678 Polaris Joshua Tree Airbnb/1.png',
            'images/projects/678 Polaris Joshua Tree Airbnb/2.png',
            'images/projects/678 Polaris Joshua Tree Airbnb/3.png',
            'images/projects/678 Polaris Joshua Tree Airbnb/4.png',
            'images/projects/678 Polaris Joshua Tree Airbnb/5.png',
            'images/projects/678 Polaris Joshua Tree Airbnb/6.png',
            'images/projects/678 Polaris Joshua Tree Airbnb/7.png',
            'images/projects/678 Polaris Joshua Tree Airbnb/8.png',
            'images/projects/678 Polaris Joshua Tree Airbnb/9.png',
            'images/projects/678 Polaris Joshua Tree Airbnb/10.png',
            'images/projects/678 Polaris Joshua Tree Airbnb/11.png',
            'images/projects/678 Polaris Joshua Tree Airbnb/12.png',
            'images/projects/678 Polaris Joshua Tree Airbnb/13.png',
            'images/projects/678 Polaris Joshua Tree Airbnb/14.png',
            'images/projects/678 Polaris Joshua Tree Airbnb/15.png',
            'images/projects/678 Polaris Joshua Tree Airbnb/16.png'
        ]
    },
    'single-family-adu': {
        title: 'Single Family+ADU',
        description: 'A thoughtfully designed single-family residence paired with an accessory dwelling unit. This project maximizes the potential of the property while maintaining architectural harmony between the main house and the ADU, creating additional living space and rental income potential.',
        images: [
            'images/projects/3003 Canfield SFD+ADU/1.jpg',
            'images/projects/3003 Canfield SFD+ADU/2.jpg',
            'images/projects/3003 Canfield SFD+ADU/3.jpg',
            'images/projects/3003 Canfield SFD+ADU/4.png',
            'images/projects/3003 Canfield SFD+ADU/5.jpg',
            'images/projects/3003 Canfield SFD+ADU/6.jpg',
            'images/projects/3003 Canfield SFD+ADU/7.jpg',
            'images/projects/3003 Canfield SFD+ADU/8.jpg',
            'images/projects/3003 Canfield SFD+ADU/9.jpg'
        ]
    },
    'luxury-expansion': {
        title: 'Expansion ADU',
        description: 'An elegant home expansion project featuring a modern addition and accessory dwelling unit in Santa Monica. This design seamlessly integrates contemporary architecture with the existing home, creating luxurious additional living space while respecting the neighborhood character.',
        images: [
            'images/projects/205 Georgina Addition+ADU/1.png',
            'images/projects/205 Georgina Addition+ADU/2.jpg',
            'images/projects/205 Georgina Addition+ADU/3.jpg',
            'images/projects/205 Georgina Addition+ADU/4.jpg',
            'images/projects/205 Georgina Addition+ADU/5.jpg',
            'images/projects/205 Georgina Addition+ADU/6.jpg',
            'images/projects/205 Georgina Addition+ADU/7.jpg',
            'images/projects/205 Georgina Addition+ADU/8.jpg',
            'images/projects/205 Georgina Addition+ADU/9.jpg',
            'images/projects/205 Georgina Addition+ADU/10.jpg'
        ]
    },
    'multi-apartment': {
        title: 'Multiple Unit Apartment',
        description: 'A contemporary 10-unit apartment building in Hollywood that maximizes density while maintaining quality living spaces. This multi-family residential project features modern amenities and efficient layouts designed for urban living, contributing to the neighborhood\'s housing solutions.',
        images: [
            'images/projects/4915 Elmwood 10 unit Apartment/1.png',
            'images/projects/4915 Elmwood 10 unit Apartment/2.png',
            'images/projects/4915 Elmwood 10 unit Apartment/3.jpg',
            'images/projects/4915 Elmwood 10 unit Apartment/4.jpg',
            'images/projects/4915 Elmwood 10 unit Apartment/5.jpg'
        ]
    },
    'multi-condo': {
        title: 'Duplex',
        description: 'A modern duplex development in Inglewood featuring two thoughtfully designed residential units. This project optimizes the site with contemporary architecture while providing quality housing options that enhance the local community and offer excellent investment potential.',
        images: [
            'images/projects/642 Fairview Duplex/1.png',
            'images/projects/642 Fairview Duplex/2.png',
            'images/projects/642 Fairview Duplex/3.png',
            'images/projects/642 Fairview Duplex/4.png',
            'images/projects/642 Fairview Duplex/5.png',
            'images/projects/642 Fairview Duplex/6.png'
        ]
    },
    'family-renovation': {
        title: 'Family Renovation',
        description: 'A comprehensive renovation project in Westwood that transforms an existing family home into a modern living space. This renovation preserves the home\'s character while updating it with contemporary amenities, improved layouts, and energy-efficient features for modern family living.',
        images: [
            'images/projects/2115 Kerwood Renovation/1.png',
            'images/projects/2115 Kerwood Renovation/2.png',
            'images/projects/2115 Kerwood Renovation/3.png',
            'images/projects/2115 Kerwood Renovation/4.jpg'
        ]
    },
    'customized-adu': {
        title: 'Customized ADU',
        description: 'A compact yet luxurious accessory dwelling unit in Pasadena, designed to maximize every square foot. This custom ADU features clever space-saving solutions, high-end finishes, and thoughtful design elements that create a comfortable and stylish independent living space.',
        images: [
            'images/projects/1950 E Mountain ADU/1.jpg',
            'images/projects/1950 E Mountain ADU/2.png',
            'images/projects/1950 E Mountain ADU/3.png',
            'images/projects/1950 E Mountain ADU/4.jpg',
            'images/projects/1950 E Mountain ADU/5.png',
            'images/projects/1950 E Mountain ADU/6.png'
        ]
    },
    'tenant-improvement': {
        title: 'General Office TI',
        description: 'A modern tenant improvement project in Anaheim that transforms a commercial space into a stylish dessert restaurant. This design creates an inviting atmosphere with contemporary finishes, efficient kitchen layouts, and customer-focused dining areas that enhance the culinary experience.',
        images: [
            'images/projects/1775 Lincoln TI/1.png',
            'images/projects/1775 Lincoln TI/2.png'
        ]
    }
};

let currentProjectGallery = null;
let currentProjectImageIndex = 0;

// Expose to window scope for carousel integration
window.currentProjectGallery = null;
window.projectsGalleryData = projectsGalleryData;

// Projects Gallery Modal functionality
document.addEventListener('DOMContentLoaded', function() {
    // Check if we're on the projects page
    if (!document.querySelector('.projects-page')) return;
    
    // Override the main gallery data with projects data when on projects page
    window.galleryData = projectsGalleryData;
    console.log('Gallery data overridden with projects data:', window.galleryData);
    
    // Prevent script.js gallery from initializing by marking it as already initialized
    window.galleryInitialized = true;
    
    const galleryModal = document.getElementById('galleryModal');
    const galleryOverlay = document.getElementById('galleryOverlay');
    const galleryClose = document.getElementById('galleryClose');
    const galleryTitle = document.getElementById('galleryTitle');
    const galleryImage = document.getElementById('galleryImage');
    const galleryCounter = document.getElementById('galleryCounter');
    const galleryThumbnails = document.getElementById('galleryThumbnails');
    const galleryPrev = document.getElementById('galleryPrev');
    const galleryNext = document.getElementById('galleryNext');
    
    // Remove any existing gallery event listeners
    const projectCards = document.querySelectorAll('.project-card');
    projectCards.forEach(card => {
        // Clone node to remove all existing event listeners
        const newCard = card.cloneNode(true);
        card.parentNode.replaceChild(newCard, card);
    });
    
    // Open gallery when project card is clicked
    const newProjectCards = document.querySelectorAll('.project-card');
    newProjectCards.forEach(card => {
        card.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            const projectKey = this.getAttribute('data-project');
            console.log('Clicked project:', projectKey);
            openProjectGallery(projectKey);
        });
    });
    
    // Close gallery functions
    function closeProjectGallery() {
        galleryModal.classList.remove('active');
        document.body.style.overflow = 'auto';
    }
    
    if (galleryClose) galleryClose.addEventListener('click', closeProjectGallery);
    if (galleryOverlay) galleryOverlay.addEventListener('click', closeProjectGallery);
    
    // Close on Escape key
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape' && galleryModal && galleryModal.classList.contains('active')) {
            closeProjectGallery();
        }
    });
    
    // Open gallery function
    function openProjectGallery(projectKey) {
        console.log('OpenProjectGallery called with key:', projectKey);
        console.log('Available projects:', Object.keys(projectsGalleryData));
        
        if (!projectsGalleryData[projectKey]) {
            console.log('Project not found:', projectKey);
            return;
        }
        
        currentProjectGallery = projectsGalleryData[projectKey];
        window.currentProjectGallery = currentProjectGallery; // Expose for carousel
        currentProjectImageIndex = 0;
        
        console.log('Opening gallery for:', currentProjectGallery.title);
        console.log('Images:', currentProjectGallery.images);
        
        if (galleryTitle) galleryTitle.textContent = currentProjectGallery.title;
        
        // Update description
        const galleryDescription = document.getElementById('galleryDescription');
        if (galleryDescription) {
            if (currentProjectGallery.description) {
                galleryDescription.innerHTML = `<p>${currentProjectGallery.description}</p>`;
            } else {
                galleryDescription.innerHTML = '<p>This project showcases our commitment to innovative design and quality craftsmanship. Each detail has been carefully considered to create a space that exceeds expectations.</p>';
            }
        }
        
        updateProjectGalleryImage();
        createProjectThumbnails();
        
        if (galleryModal) {
            galleryModal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }
    }
    
    // Update gallery image
    function updateProjectGalleryImage() {
        if (!currentProjectGallery || !galleryImage || !galleryCounter) return;
        
        galleryImage.src = currentProjectGallery.images[currentProjectImageIndex];
        galleryCounter.textContent = `${currentProjectImageIndex + 1} / ${currentProjectGallery.images.length}`;
        
        // Update thumbnail active state
        const thumbnails = galleryThumbnails ? galleryThumbnails.querySelectorAll('.gallery-thumbnail') : [];
        thumbnails.forEach((thumb, index) => {
            thumb.classList.toggle('active', index === currentProjectImageIndex);
        });
    }
    
    // Create thumbnails
    function createProjectThumbnails() {
        if (!currentProjectGallery || !galleryThumbnails) return;
        
        console.log('Creating thumbnails for:', currentProjectGallery.title);
        console.log('Thumbnail container:', galleryThumbnails);
        
        galleryThumbnails.innerHTML = '';
        
        currentProjectGallery.images.forEach((image, index) => {
            console.log('Creating thumbnail for image:', image);
            const thumbnail = document.createElement('div');
            thumbnail.className = 'gallery-thumbnail';
            thumbnail.style.backgroundImage = `url("${image}")`;
            thumbnail.style.backgroundSize = 'cover';
            thumbnail.style.backgroundPosition = 'center';
            thumbnail.style.backgroundRepeat = 'no-repeat';
            thumbnail.addEventListener('click', () => {
                currentProjectImageIndex = index;
                updateProjectGalleryImage();
            });
            
            galleryThumbnails.appendChild(thumbnail);
            console.log('Thumbnail added:', thumbnail);
        });
        
        console.log('Total thumbnails created:', galleryThumbnails.children.length);
    }
    
    // Navigation buttons
    if (galleryPrev) {
        galleryPrev.addEventListener('click', function() {
            if (!currentProjectGallery) return;
            
            currentProjectImageIndex = currentProjectImageIndex > 0 
                ? currentProjectImageIndex - 1 
                : currentProjectGallery.images.length - 1;
            updateProjectGalleryImage();
        });
    }
    
    if (galleryNext) {
        galleryNext.addEventListener('click', function() {
            if (!currentProjectGallery) return;
            
            currentProjectImageIndex = currentProjectImageIndex < currentProjectGallery.images.length - 1 
                ? currentProjectImageIndex + 1 
                : 0;
            updateProjectGalleryImage();
        });
    }
    
    // Keyboard navigation
    document.addEventListener('keydown', function(e) {
        if (!galleryModal || !galleryModal.classList.contains('active')) return;
        
        if (e.key === 'ArrowLeft') {
            if (galleryPrev) galleryPrev.click();
        } else if (e.key === 'ArrowRight') {
            if (galleryNext) galleryNext.click();
        }
    });
});

// Mobile Navigation for Projects Page
document.addEventListener('DOMContentLoaded', function() {
    const hamburger = document.getElementById('hamburger');
    const navMenu = document.getElementById('navMenu');
    
    if (hamburger && navMenu) {
        hamburger.addEventListener('click', function() {
            hamburger.classList.toggle('active');
            navMenu.classList.toggle('active');
        });
        
        // Close mobile menu when clicking on a link
        const navLinks = document.querySelectorAll('.nav-list a');
        navLinks.forEach(link => {
            link.addEventListener('click', function() {
                hamburger.classList.remove('active');
                navMenu.classList.remove('active');
            });
        });
    }
});
